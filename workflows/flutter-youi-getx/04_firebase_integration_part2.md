---
description: Integrasi Firebase services untuk Flutter dengan GetX state management: Authentication, Cloud Firestore, Firebase Sto... (Part 2/7)
---
# Workflow: Firebase Integration (GetX) (Part 2/7)

> **Navigation:** This workflow is split into 7 parts.

## Deliverables

### 1. Firebase Project Setup

**Description:** Setup Firebase project dan konfigurasi Flutter app dengan GetX.

**Recommended Skills:** `senior-flutter-developer`, `senior-firebase-developer`

**Instructions:**
1. **Install FlutterFire CLI:**
   ```bash
   dart pub global activate flutterfire_cli
   ```

2. **Configure Firebase:**
   ```bash
   flutterfire configure
   ```

3. **Add Dependencies:** (Updated untuk Flutter 3.41.1)
   ```yaml
   dependencies:
     # Firebase
     firebase_core: ^3.12.0
     firebase_auth: ^5.5.0
     cloud_firestore: ^5.6.0
     firebase_storage: ^12.4.0
     firebase_messaging: ^15.2.0

     # GetX
     get: ^4.6.6

     # Supporting
     google_sign_in: ^6.2.2
     flutter_local_notifications: ^18.0.1
     flutter_image_compress: ^2.3.0
     path_provider: ^2.1.5
     image_picker: ^1.1.2
   ```

4. **Initialize Firebase dengan GetX:**

   Perbedaan utama dengan Riverpod: tidak perlu `ProviderScope`. Firebase diinisialisasi langsung sebelum `runApp()`, dan services diregister ke GetX dependency injection dengan `Get.put()` atau `Get.putAsync()`.

   ```dart
   // lib/main.dart
   import 'package:flutter/material.dart';
   import 'package:get/get.dart';
   import 'package:firebase_core/firebase_core.dart';
   import 'firebase_options.dart';
   import 'app.dart';
   import 'core/services/storage_service.dart';
   import 'core/notifications/fcm_service.dart';

   void main() async {
     WidgetsFlutterBinding.ensureInitialized();

     // Initialize Firebase - harus sebelum service lain
     await Firebase.initializeApp(
       options: DefaultFirebaseOptions.currentPlatform,
     );

     // Register global services ke GetX DI
     // GetxService akan persist selama app lifecycle
     await Get.putAsync(() => StorageService().init());
     await Get.putAsync(() => FCMService().init());

     runApp(const MyApp());
   }
   ```

   ```dart
   // lib/app.dart
   import 'package:flutter/material.dart';
   import 'package:get/get.dart';
   import 'routes/app_pages.dart';
   import 'routes/app_routes.dart';
   import 'bindings/initial_binding.dart';
   import 'core/theme/app_theme.dart';

   class MyApp extends StatelessWidget {
     const MyApp({super.key});

     @override
     Widget build(BuildContext context) {
       return GetMaterialApp(
         title: 'Firebase GetX App',
         theme: AppTheme.light,
         darkTheme: AppTheme.dark,
         themeMode: ThemeMode.system,
         debugShowCheckedModeBanner: false,
         initialRoute: AppRoutes.splash,
         getPages: AppPages.routes,
         initialBinding: InitialBinding(),
         defaultTransition: Transition.cupertino,
       );
     }
   }
   ```

   ```dart
   // lib/bindings/initial_binding.dart
   import 'package:get/get.dart';
   import '../features/auth/data/repositories/auth_repository_impl.dart';
   import '../features/auth/domain/repositories/auth_repository.dart';
   import '../features/auth/controllers/auth_controller.dart';

   class InitialBinding extends Bindings {
     @override
     void dependencies() {
       // Repository - lazy singleton, dibuat saat pertama kali diakses
       Get.lazyPut<AuthRepository>(
         () => AuthRepositoryImpl(),
         fenix: true, // recreate jika dihapus dari memory
       );

       // Auth controller - permanent, tidak akan di-dispose
       Get.put(AuthController(), permanent: true);
     }
   }
   ```

**Output Format:**
```dart
// lib/firebase_options.dart (auto-generated by FlutterFire)
// File ini di-generate otomatis - jangan edit manual

import 'package:firebase_core/firebase_core.dart' show FirebaseOptions;
import 'package:flutter/foundation.dart'
    show defaultTargetPlatform, kIsWeb, TargetPlatform;

class DefaultFirebaseOptions {
  static FirebaseOptions get currentPlatform {
    if (kIsWeb) {
      return web;
    }
    switch (defaultTargetPlatform) {
      case TargetPlatform.android:
        return android;
      case TargetPlatform.iOS:
        return ios;
      case TargetPlatform.macOS:
        return macos;
      default:
        throw UnsupportedError('Unsupported platform');
    }
  }

  static const FirebaseOptions android = FirebaseOptions(
    apiKey: 'YOUR_API_KEY',
    appId: 'YOUR_APP_ID',
    messagingSenderId: 'YOUR_SENDER_ID',
    projectId: 'YOUR_PROJECT_ID',
    storageBucket: 'YOUR_BUCKET',
  );

  static const FirebaseOptions ios = FirebaseOptions(
    apiKey: 'YOUR_API_KEY',
    appId: 'YOUR_APP_ID',
    messagingSenderId: 'YOUR_SENDER_ID',
    projectId: 'YOUR_PROJECT_ID',
    storageBucket: 'YOUR_BUCKET',
    iosClientId: 'YOUR_IOS_CLIENT_ID',
    iosBundleId: 'YOUR_BUNDLE_ID',
  );
}
```

---

